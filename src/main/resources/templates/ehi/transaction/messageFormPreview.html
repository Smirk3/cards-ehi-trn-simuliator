<!--
  ~ Copyright (c) 2019. Igor Zubanov ( igor.zubanov@gmail.com ).
  ~ All rights reserved.
  -->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div class="container" th:fragment="content">
    <form method="post" th:action="@{/ehi/message/do}" th:object="${message}">
        <fieldset>

            <legend>Transaction message</legend>

            <div class="form-group row align-items-center">
                <div class="col-sm-10">
                    <div class="form-group">
                        <label class="col-sm-2 col-form-label" th:text="'EHI url'"></label>
                        <div class="form-control" th:text="${message.ehiUrl}" aria-describedby="helpInline" />
                    </div>
                </div>
            </div>

            <div id="requestView" class="form-group row align-items-center">
                <div class="col-sm-10">
                    <div class="form-group">
                        <label th:for="xmlRequest" class="col-sm-2 col-form-label" th:text="'Request'"></label>
                        <div style="float: right;">
                            <button type="button" class="btn btn-link" onclick="editRequest()">Edit</button>
                        </div>
                        <pre><code th:id="xmlRequestView" class="language-xml"><textarea rows="30" class="form-control" th:utext="${message.xmlRequest}"/></code></pre>
                        <input type="hidden" th:id="xmlRequest" th:name="xmlRequest" th:value="${message.xmlRequest}"/>
                    </div>
                </div>
            </div>

            <div id="requestEdit" class="form-group row align-items-center" style="display: none;">
                <div class="col-sm-10">
                    <div class="form-group">
                        <label th:for="xmlRequest" class="col-sm-2 col-form-label" th:text="'Request'"></label>
                        <div style="float: right;">
                            <button type="button" class="btn btn-link" onclick="saveRequest()">Save</button>
                        </div>
                        <textarea rows="30" class="form-control" th:id="xmlRequestEdit" th:utext="${message.xmlRequest}"/>
                    </div>
                </div>
            </div>

        </fieldset>
        <div id="actionButtons" class="form-group row">
            <div class="offset-sm-2 col-sm-10">
                <button type="submit" class="btn btn-indigo">Submit</button>
                <!--<a class="btn btn-light" th:href="@{/ehi/message/templates/create/name}" role="button">Create template</a>-->
                <a class="btn btn-light" th:href="@{/ehi/message/edit/fields}" role="button">Back</a>
            </div>
        </div>
    </form>
</div>

<script th:inline="javascript">
    var contextPath = /*[[${#httpServletRequest.getContextPath()+'/'}]]*/ 'context';
</script>

</body>
</html>